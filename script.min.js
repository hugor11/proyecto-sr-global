let lastToggleTime=0;const DEBOUNCE_MS=300;var __swiperWaitTimer=null;function setVH(){try{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),console.log("VH updated:",e,"px")}catch(e){console.warn("Error setting VH property:",e)}}function ensurePromotionsSwiper(e=!1){const t=document.querySelector("#promotions-carousel");if(void 0===window.Swiper)return void(__swiperWaitTimer||(__swiperWaitTimer=setInterval(()=>{void 0!==window.Swiper&&(clearInterval(__swiperWaitTimer),__swiperWaitTimer=null,ensurePromotionsSwiper(!0))},150)));if(!t)return;if(window.SR&&window.SR.promotionsSwiper){try{window.SR.promotionsSwiper.destroy(!0,!0)}catch(e){console.warn("Error destroying Swiper:",e)}window.SR.promotionsSwiper=null}const o=t.querySelector(".swiper-pagination");if(o&&(o.innerHTML=""),null===t.offsetParent){console.warn("Swiper container not visible yet, deferring init");const e=new IntersectionObserver(t=>{t[0].isIntersecting&&(e.disconnect(),ensurePromotionsSwiper(!0))});return void e.observe(t)}try{window.SR.promotionsSwiper=new window.Swiper(t,{slidesPerView:1,spaceBetween:20,loop:!1,grabCursor:!0,pagination:{el:".swiper-pagination",clickable:!0,dynamicBullets:!0},breakpoints:{640:{slidesPerView:2},1024:{slidesPerView:3}},on:{init(){console.log("âœ… Swiper inicializado correctamente"),this.pagination.render(),this.pagination.update()}}})}catch(e){console.error("Error initializing Swiper:",e)}}function initFancybox(){if(void 0!==window.Fancybox)try{Fancybox.bind("[data-fancybox]",{animated:!0,showClass:"fancybox-zoomIn",hideClass:"fancybox-zoomOut"})}catch{}}function initZohoFormIntegration(){const e=document.getElementById("zoho-form-iframe");if(!e)return;let t=1e3;const o=o=>{const n=Math.max(600,Math.min(3e3,Number(o)||t));t=n,e.style.height=n+"px"};window.addEventListener("message",e=>{const t=e.data;if(t&&"object"==typeof t&&("zohoForm:resize"===t.type&&t.height&&o(t.height),"zohoForm:submitted"===t.type))try{"function"==typeof gtag&&gtag("event","generate_lead",{method:"zoho_form",page_path:window.location.pathname+window.location.search})}catch{}}),o(t)}function addScrollEffects(){const e=document.querySelectorAll(".reveal");e.length&&window.addEventListener("scroll",function(){e.forEach(e=>{const t=e.getBoundingClientRect(),o=window.innerHeight;t.top<=o-100&&e.classList.add("reveal-active")})})}function initModals(){const e=document.querySelectorAll(".modal"),t=document.querySelectorAll("[data-modal]"),o=document.querySelectorAll(".modal-close");t.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=e.getAttribute("data-modal"),n=document.getElementById(o);n&&(n.classList.remove("hidden"),document.body.classList.add("overflow-hidden"))})}),o.forEach(e=>{e.addEventListener("click",()=>{const t=e.closest(".modal");t&&(t.classList.add("hidden"),document.body.classList.remove("overflow-hidden"))})}),e.forEach(e=>{e.addEventListener("click",t=>{t.target===e&&(e.classList.add("hidden"),document.body.classList.remove("overflow-hidden"))})})}function initGAInteractions(){const e=(e,t)=>{try{"function"==typeof gtag&&gtag("event",e,t||{})}catch{}};document.addEventListener("click",t=>{const o=t.target&&t.target.closest?t.target.closest("a"):null;if(!o)return;const n=(o.getAttribute("href")||"").trim();if(!n)return;const i={page_path:location.pathname+location.search,link_url:n};/wa\.me|api\.whatsapp\.com|whatsapp:\/\//i.test(n)?e("contact",{method:"whatsapp",...i}):n.startsWith("mailto:")?e("contact",{method:"email",...i}):n.startsWith("tel:")?e("contact",{method:"phone",...i}):/contactar|contact|contact\.html/i.test(n)&&e("contact",{method:"web_form",...i})})}!function(){"use strict";function e(){try{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`),console.log("VH updated:",e,"px")}catch(e){console.warn("Error setting VH property:",e)}}Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches&&t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector),e(),window.addEventListener("resize",e,{passive:!0}),window.addEventListener("orientationchange",function(){setTimeout(e,100)},{passive:!0}),"ontouchstart"in window&&document.documentElement.classList.add("touch-device"),window.navigator.userAgent.match(/(iPad|iPhone|iPod)/g)&&(document.documentElement.style.webkitOverflowScrolling="touch"),console.log("iOS/Safari polyfills and fixes loaded")}(),(()=>{if(window.SR=window.SR||{},window.SR.__mainLoaded)return void console.warn("[SR] main bundle already loaded â€” skipping duplicate execution");let e;function t(e){const t=document.querySelector("[data-menu-toggle]"),o=document.querySelector("[data-menu-panel]")||document.getElementById("mobile-menu"),n=document.querySelector("[data-menu-overlay]");if(!t||!o)return void console.warn("âš ï¸ No se encontrÃ³ botÃ³n o panel");console.log("ðŸ”§ setMenuState llamado con isOpen:",e),console.log("ðŸ“¦ Panel antes:",{hasHidden:o.hasAttribute("hidden"),display:getComputedStyle(o).display,classes:o.className}),t.setAttribute("aria-expanded",String(e)),t.setAttribute("aria-label",e?"Cerrar menÃº":"Abrir menÃº"),e?(o.removeAttribute("hidden"),console.log("âœ… Atributo hidden REMOVIDO")):(o.setAttribute("hidden",""),console.log("âœ… Atributo hidden AGREGADO")),console.log("ðŸ“¦ Panel despuÃ©s:",{hasHidden:o.hasAttribute("hidden"),display:getComputedStyle(o).display,rect:o.getBoundingClientRect()}),document.body.classList.toggle("overflow-hidden",e),document.body.classList.toggle("touch-none",e),n&&n.classList.toggle("hidden",!e);const i=t.querySelector("i");i&&(i.className=e?"fas fa-times text-2xl":"fas fa-bars text-2xl"),console.log(e?"âœ… MenÃº abierto":"âœ… MenÃº cerrado")}function o(){e&&e.abort(),e=new AbortController;const{signal:o}=e;console.log("âœ… Inicializando menÃº mÃ³vil...");const n=document.querySelector("[data-menu-panel]");if(n){const e=n.querySelectorAll("[data-menu-close]");e.length>1&&(console.warn(`âš ï¸ ${e.length} botones de cerrar, eliminando duplicados`),e.forEach((e,t)=>{t>0&&e.remove()}))}document.addEventListener("click",e=>{const o=e.target.closest("[data-menu-panel] a[href]");if(o)return console.log("ðŸ”— Navegando a:",o.href),void setTimeout(()=>t(!1),100);const n=e.target.closest("[data-menu-panel]"),i=e.target.closest("[data-menu-close]");if(n&&!i)return void console.log("ðŸ”µ Clic dentro del panel, ignorando");const a=e.target.closest("[data-menu-toggle]"),r=e.target.closest("[data-menu-overlay]");if(a){e.preventDefault(),e.stopPropagation();const o="true"===a.getAttribute("aria-expanded");console.log("ðŸŽ¯ Toggle por botÃ³n hamburguesa"),t(!o)}else i?(e.preventDefault(),e.stopPropagation(),console.log("ðŸ”´ Cerrando por botÃ³n X"),t(!1)):r&&(e.preventDefault(),e.stopPropagation(),console.log("ðŸ”´ Cerrando por overlay (fondo oscuro)"),t(!1))},{capture:!0,signal:o}),document.addEventListener("keydown",e=>{if("Escape"===e.key){const e=document.querySelector("[data-menu-toggle]");"true"===e?.getAttribute("aria-expanded")&&(console.log("ðŸ”´ Cerrando con Escape"),t(!1))}},{signal:o}),console.log("âœ… MenÃº inicializado correctamente")}function n(){window.__appStarted?console.log("ðŸ”„ App ya iniciada, saltando reinicializaciÃ³n"):(window.__appStarted=!0,console.log("ðŸš€ Iniciando app..."),o(),setVH(),"function"==typeof ensurePromotionsSwiper&&ensurePromotionsSwiper(!1),"function"==typeof initFancybox&&initFancybox(),"function"==typeof addScrollEffects&&addScrollEffects(),"function"==typeof initModals&&initModals(),"function"==typeof initGAInteractions&&initGAInteractions(),console.log("âœ… App iniciada correctamente"))}window.SR.__mainLoaded=!0,window.addEventListener("pageshow",e=>{e.persisted&&(console.log("ðŸ”„ pageshow con BFCache, reinicializando"),o())}),window.addEventListener("pagehide",()=>{e?.abort(),t(!1)}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()})(),console.log("âœ… SR Global Experiences script loaded successfully");